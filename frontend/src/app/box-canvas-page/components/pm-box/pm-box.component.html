<div
  class="editor-box"
  cdkDragBoundary=".text-box-boundary"
  cdkDrag
  [cdkDragFreeDragPosition]="dragPosition"
  (cdkDragEnded)="onDragEnded($event)"
>
  <div class="editor-container">
    <div class="editor-bar">
      <div class="editor-state" (click)="onCycleModes()">
        {{ stateText }}
      </div>

      <div cdkDragHandle class="editor-handle">
        Move
      </div>

      <button *ngIf="isDevMode" (click)="onDebug()">
        Debug
      </button>

      <div class="editor-state" (click)="onDeleteBox()">
        Close
      </div>
    </div>

    <div class="editor-wrap">
      <code
        *ngIf="box.state === 'both' || box.state === 'markdown'"
        class="editor-markdown"
        contentEditable
      ></code>

      <!-- WYSIWYG start -->
      <div
        *ngIf="box.state === 'both' || box.state === 'wysiwyg'"
        class="editor-wysiwyg"
        #pmEditorRef
        id="editor"
      ></div>

      <!-- WYSIWYG end -->
    </div>
  </div>
</div>

<div id="content" style="display: none;">
  <h2>
    Demo text
  </h2>
  <p>
    Saving doesn't really work yet. <br />
    But the editor should work.
  </p>
  <p>
    The editor should support both <b>bold</b> and <i>italic</i>, <br />
    as well as <b><i>bold and italic</i></b> text.
  </p>
  <p>
    This is powered by the <a href="https://prosemirror.net/">ProseMirror</a>.
  </p>
</div>
